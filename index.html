<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webpage with 5 Sections</title>
    <link rel="stylesheet" href="styles.css"> <!-- Linking to the external CSS file -->

    <!-- Vega-Lite & Vega Embed Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>

<body>

    <!-- Section 1 -->
    <div class="section section1">
        <div class="section-content">
            <h2 class="tech-news">AUSTRALIA NEWS</h2>
            <hr class="divider">
            <h3 class="breaking-news">BREAKING NEWS</h3>
            <h1 class="headline">Have Female Been Treated Equally <br> And Feeling Safe ?</h1>
        </div>
    </div>

    <!-- Section 2 -->

    <div class="section section2">
        <div class="map-region-container">
            <div class="map-container">
                <div id="map" class="map"></div> <!-- Map is contained within the map-container -->
            </div>
            <!-- Region Selection Buttons -->
            <div class="region-buttons">
                <button class="region-btn" data-region="World">World</button>
                <button class="region-btn" data-region="Africa">Africa</button>
                <button class="region-btn" data-region="Asia">Asia</button>
                <button class="region-btn" data-region="Europe">Europe</button>
                <button class="region-btn" data-region="North America">North America</button>
                <button class="region-btn" data-region="Oceania">Oceania</button>
                <button class="region-btn" data-region="South America">South America</button>
            </div>
        </div>

        <!-- Explanation Section -->
        <div class="explanation-container">
            <p>
                The historical perception of females as inferior is reflected in population distributions. This map
                shows the female population ratio globally from 1960 to 2022. In 1960, many countries had fewer females
                compared to males.
                Over time, the female population has grown. For instance, Australia had a male-dominated population
                until 1978 but now has a balanced gender ratio. We will further explore female labor force
                participation, earnings, and perceptions of safety in Australia.
            </p>
        </div>
    </div>

    <script type="text/javascript">

        let spec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": {
                "text": "Female Population Ratio by Country (1960-2022)",
                "font": "Georgia",
                "fontSize": 20,
                "fontWeight": "bold",
                "anchor": "start",
                "color": "#4F4F4F",
                "dy": -10

            },
            "width": 700,
            "height": 400,
            "projection": {
                "type": "equalEarth"
            },
            "params": [
                {
                    "name": "YearSelection",
                    "value": 2022,
                    "bind": {
                        "input": "range",
                        "min": 1960,
                        "max": 2022,
                        "step": 1,
                        "name": "Year Selection: "
                    }
                }
            ],
            "data": {
                "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/female_population.csv",
                "format": { "type": "csv" }
            },
            "transform": [
                {
                    "filter": "datum.Year == YearSelection"
                },
                {
                    "lookup": "Country",
                    "from": {
                        "data": {
                            "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/ne_110m-2.topojson",
                            "format": {
                                "type": "topojson",
                                "feature": "ne_110m_admin_0_countries"
                            }
                        },
                        "key": "properties.GU_A3",
                        "fields": ["type", "properties", "geometry"]
                    }
                },
                {
                    "calculate": "datum['Population Female'] <= 46 ? '<= 46%' : datum['Population Female'] > 46 && datum['Population Female'] <= 50 ? '46-50%' : datum['Population Female'] > 50 && datum['Population Female'] <= 52 ? '50-52%' : datum['Population Female'] > 52 && datum['Population Female'] <= 54 ? '52-54%' : '> 54%'",
                    "as": "PopulationBin"
                }
            ],
            "layer": [
                {
                    "data": {
                        "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/oceans.topojson",
                        "format": {
                            "type": "topojson",
                            "feature": "oceans"
                        }
                    },
                    "mark": {
                        "type": "geoshape",
                        "fill": "#92B7C7",
                        "stroke": null
                    }
                },
                {
                    "mark": {
                        "type": "geoshape",
                        "stroke": "black",
                        "strokeWidth": 0.5
                    },
                    "encoding": {
                        "color": {
                            "field": "PopulationBin",
                            "type": "nominal",
                            "scale": {
                                "domain": ["<= 46%", "46-50%", "50-52%", "52-54%", "> 54%"],
                                "range": ["#2A3B60", "#4A617D", "#EDE2D0", "#C94C4C", "#8B1A1A"]
                            },
                            "legend": {
                                "title": "Female Population Ratio (%)",
                                "titleFontSize": 12,
                                "labelFontSize": 14,
                                "titleFont": "Georgia",
                                "labelFont": "Georgia",
                                "titleColor": "#4F4F4F",
                                "labelColor": "#4F4F4F"
                                
                            }
                        },
                        "tooltip": [
                            {
                                "field": "properties.NAME",
                                "type": "nominal",
                                "title": "Country"
                            },
                            {
                                "field": "Population Female",
                                "type": "quantitative",
                                "title": "Female Population Ratio (%)"
                            },
                            {
                                "field": "Year",
                                "type": "ordinal",
                                "title": "Year"
                            }
                        ]
                    }
                }
            ]
        };

        // Function to update the map with a zoomed-in region
        function updateMap(region) {
            const projections = {
                "World": { "type": "equalEarth" },
                "Africa": { "type": "equalEarth", "center": [20, 10], "scale": 300 },
                "Asia": { "type": "equalEarth", "center": [90, 20], "scale": 300 },
                "Europe": { "type": "equalEarth", "center": [15, 60], "scale": 750 },
                "North America": { "type": "equalEarth", "center": [-100, 40], "scale": 300 },
                "Oceania": { "type": "equalEarth", "center": [140, -25], "scale": 300 },
                "South America": { "type": "equalEarth", "center": [-60, -15], "scale": 300 }
            };

            // Set the projection based on the selected region
            if (region in projections) {
                spec.projection = projections[region];
            } else {
                spec.projection = { "type": "equalEarth" }; // Default to world view
            }

            // Re-render the map
            vegaEmbed('#map', spec).then(result => { }).catch(console.error);
        }

        // Event listener for the region buttons
        document.querySelectorAll('.region-btn').forEach(button => {
            button.addEventListener('click', function () {
                const selectedRegion = this.getAttribute('data-region');
                updateMap(selectedRegion);
            });
        });

        // Initially render the world view
        updateMap('World');
    </script>

    <!-- Section 3: Labour Force Participation Section -->
    <div class="section section3">
        <div class="inner-container">

            <div class="card-header">

                <h1>Female <span style="color: rgb(219, 78, 78);">Labour Participation</span> In Australia</h1>


            </div>

            <!-- Labor Force Participation Graphs (Each in its own card) -->

            <div class="card">
                <div class="card-body">
                    <div id="graphs"></div> <!-- Line charts will be here -->
                </div>
            </div>




            <!-- Explanation Text (Separate Card) -->
            <div class="card">
                <div class="card-body">
                    <p class="text-content">
                        From the graph, we can see how Australia has less gap between male and female labour
                        participation compared to the other.
                        On average, female still have a lower labour force participation which can be improved in the
                        future.
                    </p>
                </div>
            </div>

            <!-- Bubble Plot (Same Layout as Above) -->

            <div class="card">
                <div class="card-body">
                    <div id="bubblePlot"></div> <!-- Bubble plot will be here -->
                </div>
            </div>




            <!-- Explanation Text for Bubble Plot (Separate Card) -->
            <div class="card">
                <div class="card-body">
                    <p class="text-content">
                        This scatter plot illustrates the relationship between female labor force participation and the
                        ratio of female-to-male unpaid domestic work across various countries.
                        Generally, countries with higher ratios of unpaid domestic work for women tend to have lower
                        female labor force participation.
                        Australia's position is notable for having a relatively high labor force participation rate
                        despite a moderate burden of unpaid work, reflecting ongoing gender disparities in work
                        responsibilities.
                    </p>
                </div>
            </div>



            <div class="card-header">

                <h1>Female <span style="color: rgb(219, 78, 78);"> Employability Rights</span> In Australia</h1>


            </div>

            <!-- Employment Ratio Map and Weekly Earnings Donut Chart side by side -->
            <div class="grid">
                <!-- Employment Ratio Map -->
                <div class="card">
                    <div class="card-body">
                        <div id="map2"></div> <!-- Map will be here -->
                    </div>
                </div>
                <!-- Weekly Earnings Donut Chart -->
                <div class="card">
                    <div class="card-body">
                        <div id="weeklygap"></div> <!-- Donut chart will be here -->
                        <div style="text-align: center; margin-bottom: 1rem;">
                            <button id="resetButton" class="reset-button">Reset to Initial Chart</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Additional Text Container 1 -->
            <div class="card">
                <div class="card-body">
                    <p class="text-content">
                        From both the employment participation and average weekly earning pay gap, we can see how
                        Female's employment participation has increased within the year.
                        Although female's weekly earning keep on increasing, it goes the same for the male and it is
                        creating a signigicant and consistent gap which makes it unfair for
                        working women in Australia.
                    </p>
                </div>
            </div>



        </div>
    </div>

    <script>



        const bubblePlotSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": {
                "text": "Female Labor Force Participation vs. Unpaid Domestic Work",
                "font": "Georgia",
                "fontSize": 20,
                "fontWeight": "bold",
                "anchor": "start",
                "color": "#4F4F4F",
                "dy": -10
            },
            "width": 800,
            "height": 600,
            "data": {
                "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/unpaidwork.csv",
                "format": { "type": "csv" }
            },
            "transform": [
                {
                    "calculate": "datum['Happiness Score'] < 4 ? 'Low' : datum['Happiness Score'] < 6 ? 'Medium' : 'High'",
                    "as": "Happiness Category"
                }
            ],
            "params": [
                {
                    "name": "happinessFilter",
                    "bind": {
                        "input": "select",
                        "options": ["All", "Low", "Medium", "High"],
                        "labels": ["All", "Low", "Medium", "High"],
                        "name": "Filter by Happiness Category: ",
                        "inputStyle": "font-family: Georgia; font-size: 14px; padding: 5px;"
                    },
                    "value": "All"
                }
            ],
            "layer": [
                {
                    "transform": [
                        {
                            "filter": "happinessFilter == 'All' || datum['Happiness Category'] == happinessFilter"
                        }
                    ],
                    "mark": {
                        "type": "point",
                        "filled": true
                    },
                    "encoding": {
                        "x": {
                            "field": "Ratio Female to Male unpaid",
                            "type": "quantitative",
                            "title": "Ratio of Female-to-Male Unpaid Domestic Work",
                            "scale": { "domain": [0, 13] },
                            "axis": {
                                "tickMinStep": 1,
                                "labelFont": "Georgia",
                                "titleFont": "Georgia",
                                "titleColor": "#000000",
                                "labelColor": "#4F4F4F"
                            }
                        },
                        "y": {
                            "field": "Female Participation",
                            "type": "quantitative",
                            "title": "Female Labor Force Participation (%)",
                            "scale": { "domain": [0, 90] },
                            "axis": {
                                "labelOverlap": "false",
                                "labelFont": "Georgia",
                                "titleFont": "Georgia",
                                "titleColor": "#000000",
                                "labelColor": "#4F4F4F"
                            }
                        },
                        "size": {
                            "field": "Happiness Category",
                            "type": "nominal",
                            "title": "Happiness Category",
                            "scale": {
                                "domain": ["Low", "Medium", "High"],
                                "range": [50, 200, 400]
                            }
                        },
                        "color": {
                            "field": "Happiness Category",
                            "type": "nominal",
                            "title": "Happiness Category",
                            "legend": {
                                "titleFontSize": 16,
                                "labelFontSize": 14,
                                "titleFont": "Georgia",
                                "labelFont": "Georgia",
                                "titleColor": "#4F4F4F",
                                "labelColor": "#4F4F4F"
                            },
                            "scale": {
                                "domain": ["Low", "Medium", "High"],
                                "range": ["#F4A8A8", "#D96464", "#8B1A1A"]
                            }
                        },
                        "stroke": {
                            "condition": { "test": "datum.Country === 'Australia'", "value": "black" },
                            "value": null
                        },
                        "tooltip": [
                            { "field": "Country", "type": "nominal", "title": "Country" },
                            { "field": "Female Participation", "type": "quantitative", "title": "Female Participation (%)" },
                            { "field": "Ratio Female to Male unpaid", "type": "quantitative", "title": "Ratio of Unpaid Domestic Work" },
                            { "field": "Happiness Score", "type": "quantitative", "title": "Happiness Score" }
                        ]
                    }
                },
                {
                    "mark": { "type": "line", "color": "black", "opacity": 0.5 },
                    "transform": [
                        { "regression": "Female Participation", "on": "Ratio Female to Male unpaid", "extent": [0, 13] }
                    ],
                    "encoding": {
                        "x": {
                            "field": "Ratio Female to Male unpaid",
                            "type": "quantitative",
                            "title": "Ratio of Female-to-Male Unpaid Domestic Work"
                        },
                        "y": {
                            "field": "Female Participation",
                            "type": "quantitative",
                            "title": "Female Labor Force Participation (%)"
                        }
                    }
                },
                {
                    "mark": {
                        "type": "rect",
                        "color": "#f0f0f0",
                        "stroke": "lightgrey",
                        "strokeWidth": 1
                    },
                    "encoding": {
                        "x": { "value": 50 },
                        "x2": { "value": 600 },
                        "y": { "value": 20 },
                        "y2": { "value": 60 }
                    }
                },
                {
                    "mark": {
                        "type": "text",
                        "color": "black",
                        "fontSize": 12,
                        "align": "center",
                        "dx": 0,
                        "dy": -10
                    },
                    "encoding": {
                        "x": { "value": 300 },
                        "y": { "value": 45 },
                        "text": { "value": "Female labor force participation is inversely related to unpaid domestic work." }
                    }
                }
            ]
        }
            ;



        const graphsSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": {
                "text": "Labor Force Participation Rate by Sex (% of population 15+)",
                "font": "Georgia",
                "fontSize": 20,
                "fontWeight": "bold",
                "anchor": "start",
                "color": "#4F4F4F",
                "dy": -10
            },
            "vconcat": [
                {
                    "hconcat": [
                        {
                            "title": {
                                "text": "Australia",
                                "subtitle": "Female participation rate shows gradual increase compared to male",
                                "subtitleFont": "Georgia",
                                "subtitleFontSize": 12,
                                "subtitleFontWeight": "normal",
                                "subtitleColor": "#4F4F4F",
                                "anchor": "start"
                            },
                            "width": 400,
                            "height": 200,
                            "data": {
                                "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/labourparticipation.csv",
                                "format": { "type": "csv" }
                            },
                            "transform": [{ "filter": "datum.Country == 'Australia'" }],
                            "mark": {
                                "type": "line",
                                "point": true,
                                "tooltip": true
                            },
                            "encoding": {
                                "x": {
                                    "field": "Year",
                                    "type": "ordinal",
                                    "title": "Year",
                                    "axis": { "labelAngle": 0 }
                                },
                                "y": {
                                    "field": "Rate",
                                    "type": "quantitative",
                                    "title": "Participation Rate (%)",
                                    "scale": { "domain": [0, 100] }
                                },
                                "color": {
                                    "field": "Gender",
                                    "type": "nominal",
                                    "scale": {
                                        "domain": ["Female", "Male"],
                                        "range": ["#8B1A1A", "#2A3B60"]
                                    },
                                    "title": "Sex",
                                    "legend": {
                                        "symbolType": "stroke",
                                        "symbolStrokeWidth": 4,
                                        "labelFont": "Georgia",
                                        "labelFontSize": 12,
                                        "titleFont": "Georgia",
                                        "titleFontSize": 14,
                                        "titleColor": "#4F4F4F",
                                        "labelColor": "#4F4F4F"
                                    }
                                },
                                "tooltip": [
                                    { "field": "Year", "type": "ordinal", "title": "Year" },
                                    { "field": "Gender", "type": "nominal", "title": "Gender" },
                                    { "field": "Rate", "type": "quantitative", "title": "Rate (%)", "format": ".1f" }
                                ]
                            }
                        },
                        {
                            "title": {
                                "text": "East Asia & Pacific",
                                "subtitle": "The participation rate for both genders shows a steady decline",
                                "subtitleFont": "Georgia",
                                "subtitleFontSize": 12,
                                "subtitleFontWeight": "normal",
                                "subtitleColor": "#4F4F4F",
                                "anchor": "start"
                            },
                            "width": 400,
                            "height": 200,
                            "data": {
                                "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/labourparticipation.csv",
                                "format": { "type": "csv" }
                            },
                            "transform": [{ "filter": "datum.Country == 'East Asia & Pacific'" }],
                            "mark": {
                                "type": "line",
                                "point": true,
                                "tooltip": true
                            },
                            "encoding": {
                                "x": {
                                    "field": "Year",
                                    "type": "ordinal",
                                    "title": "Year",
                                    "axis": { "labelAngle": 0 }
                                },
                                "y": {
                                    "field": "Rate",
                                    "type": "quantitative",
                                    "title": "Participation Rate (%)",
                                    "scale": { "domain": [0, 100] }
                                },
                                "color": {
                                    "field": "Gender",
                                    "type": "nominal",
                                    "scale": {
                                        "domain": ["Female", "Male"],
                                        "range": ["#8B1A1A", "#2A3B60"]
                                    },
                                    "title": "Sex",
                                    "legend": {
                                        "symbolType": "stroke",
                                        "symbolStrokeWidth": 4,
                                        "labelFont": "Georgia",
                                        "labelFontSize": 12,
                                        "titleFont": "Georgia",
                                        "titleFontSize": 14,
                                        "titleColor": "#4F4F4F",
                                        "labelColor": "#4F4F4F"
                                    }
                                },
                                "tooltip": [
                                    { "field": "Year", "type": "ordinal", "title": "Year" },
                                    { "field": "Gender", "type": "nominal", "title": "Gender" },
                                    { "field": "Rate", "type": "quantitative", "title": "Rate (%)", "format": ".1f" }
                                ]
                            }
                        }
                    ]
                },
                {
                    "hconcat": [
                        {
                            "title": {
                                "text": "High Income",
                                "subtitle": "Participation rate remains relatively high for males, stable for females",
                                "subtitleFont": "Georgia",
                                "subtitleFontSize": 12,
                                "subtitleFontWeight": "normal",
                                "subtitleColor": "#4F4F4F",
                                "anchor": "start"
                            },
                            "width": 400,
                            "height": 200,
                            "data": {
                                "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/labourparticipation.csv",
                                "format": { "type": "csv" }
                            },
                            "transform": [{ "filter": "datum.Country == 'High Income'" }],
                            "mark": {
                                "type": "line",
                                "point": true,
                                "tooltip": true
                            },
                            "encoding": {
                                "x": {
                                    "field": "Year",
                                    "type": "ordinal",
                                    "title": "Year",
                                    "axis": { "labelAngle": 0 }
                                },
                                "y": {
                                    "field": "Rate",
                                    "type": "quantitative",
                                    "title": "Participation Rate (%)",
                                    "scale": { "domain": [0, 100] }
                                },
                                "color": {
                                    "field": "Gender",
                                    "type": "nominal",
                                    "scale": {
                                        "domain": ["Female", "Male"],
                                        "range": ["#8B1A1A", "#2A3B60"]
                                    },
                                    "title": "Sex",
                                    "legend": {
                                        "symbolType": "stroke",
                                        "symbolStrokeWidth": 4,
                                        "labelFont": "Georgia",
                                        "labelFontSize": 12,
                                        "titleFont": "Georgia",
                                        "titleFontSize": 14,
                                        "titleColor": "#4F4F4F",
                                        "labelColor": "#4F4F4F"
                                    }
                                },
                                "tooltip": [
                                    { "field": "Year", "type": "ordinal", "title": "Year" },
                                    { "field": "Gender", "type": "nominal", "title": "Gender" },
                                    { "field": "Rate", "type": "quantitative", "title": "Rate (%)", "format": ".1f" }
                                ]
                            }
                        },
                        {
                            "title": {
                                "text": "World",
                                "subtitle": "Global trends indicate a slight decline in male participation",
                                "subtitleFont": "Georgia",
                                "subtitleFontSize": 12,
                                "subtitleFontWeight": "normal",
                                "subtitleColor": "#4F4F4F",
                                "anchor": "start"
                            },
                            "width": 400,
                            "height": 200,
                            "data": {
                                "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/labourparticipation.csv",
                                "format": { "type": "csv" }
                            },
                            "transform": [{ "filter": "datum.Country == 'World'" }],
                            "mark": {
                                "type": "line",
                                "point": true,
                                "tooltip": true
                            },
                            "encoding": {
                                "x": {
                                    "field": "Year",
                                    "type": "ordinal",
                                    "title": "Year",
                                    "axis": { "labelAngle": 0 }
                                },
                                "y": {
                                    "field": "Rate",
                                    "type": "quantitative",
                                    "title": "Participation Rate (%)",
                                    "scale": { "domain": [0, 100] }
                                },
                                "color": {
                                    "field": "Gender",
                                    "type": "nominal",
                                    "scale": {
                                        "domain": ["Female", "Male"],
                                        "range": ["#8B1A1A", "#2A3B60"]
                                    },
                                    "title": "Sex",
                                    "legend": {
                                        "symbolType": "stroke",
                                        "symbolStrokeWidth": 4,
                                        "labelFont": "Georgia",
                                        "labelFontSize": 12,
                                        "titleFont": "Georgia",
                                        "titleFontSize": 14,
                                        "titleColor": "#4F4F4F",
                                        "labelColor": "#4F4F4F"
                                    }
                                },
                                "tooltip": [
                                    { "field": "Year", "type": "ordinal", "title": "Year" },
                                    { "field": "Gender", "type": "nominal", "title": "Gender" },
                                    { "field": "Rate", "type": "quantitative", "title": "Rate (%)", "format": ".1f" }
                                ]
                            }
                        }
                    ]
                }
            ],
            "config": {
                "background": "white",
                "axis": {
                    "labelFont": "Georgia",
                    "titleFont": "Georgia"
                }
            }
        };

        const map2Spec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "width": 300,
            "height": 350,
            "title": {
                "text": "Female Employment to Population Ratio in Australia",
                "fontSize": 18,
                "font": "Georgia",
                "fontWeight": "bold",
                "color": "#4F4F4F",
                "anchor": "middle",
                "offset": 20,
                "subtitle": "Click on the state to filter average weekly earnings",
                "subtitleFont": "Georgia",
                "subtitleFontSize": 12,
                "subtitleFontWeight": "normal",
                "subtitleColor": "#8B1A1A",
                "subtitlePadding": 10
            },

            "params": [
                {
                    "name": "YearSelection",
                    "value": 1988,
                    "bind": {
                        "input": "range",
                        "min": 1988,
                        "max": 2024,
                        "step": 4,
                        "name": "Year Selection: "
                    }
                },
                {
                    "name": "selectedState",
                    "select": { "type": "point", "fields": ["State"] },
                    "bind": "scales"
                }
            ],
            "data": {
                "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/Employment%20Population%20Female%20by%20year.csv",
                "format": { "type": "csv" }
            },
            "transform": [
                {
                    "filter": "datum.Year == YearSelection"
                },
                {
                    "lookup": "State",
                    "from": {
                        "data": {
                            "url": "https://raw.githubusercontent.com/isut0003/3179/main/ne_50m-2.topojson",
                            "format": {
                                "type": "topojson",
                                "feature": "ne_50m_admin_1_states_provinces"
                            }
                        },
                        "key": "properties.name",
                        "fields": ["type", "properties", "geometry"]
                    }
                }
            ],
            "projection": {
                "type": "mercator"
            },
            "mark": {
                "type": "geoshape",
                "stroke": "white"
            },
            "encoding": {
                "color": {
                    "field": "Ratio",
                    "type": "quantitative",
                    "title": "Employment Ratio (%)",
                    "legend": {
                        "orient": "bottom",
                        "direction": "horizontal",
                        "titleFont": "Georgia",
                        "titleFontSize": 12,
                        "labelFont": "Georgia",
                        "labelFontSize": 10,
                        "titleColor": "#4F4F4F",
                        "labelColor": "#4F4F4F",
                        "gradientLength": 350
                    },
                    "scale": {
                        "range": ["#F4A8A8", "#8B1A1A"],
                        "domain": [30, 70]
                    }
                },
                "tooltip": [
                    { "field": "State", "type": "nominal", "title": "State" },
                    { "field": "Ratio", "type": "quantitative", "format": ".1f", "title": "Employment Ratio (%)" },
                    { "field": "Year", "type": "quantitative", "title": "Year" }
                ]
            },
            "config": {
                "background": "white",
                "view": { "stroke": "transparent" }
            }
        };



        const weeklygapSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": {
                "text": "Average Weekly Earnings by Gender",
                "fontSize": 18,
                "font": "Georgia",
                "fontWeight": "bold",
                "color": "#4F4F4F",
                "anchor": "middle",
                "offset": 20
            },
            "width": 300,
            "height": 350,
            "data": {
                "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/averageweekstate.csv",
                "format": { "type": "csv" }
            },
            "transform": [
                {
                    "filter": "selectedState == null || datum.State == selectedState"
                }
            ],
            "mark": {
                "type": "arc",
                "innerRadius": 60,
                "stroke": "#fff"
            },
            "encoding": {
                "theta": { "field": "Earning", "type": "quantitative", "title": "Earning (AUD)" },
                "color": {
                    "field": "Gender",
                    "type": "nominal",
                    "scale": {
                        "domain": ["Male", "Female"],
                        "range": ["#2A3B60", "#8B1A1A"]
                    },
                    "title": "Gender",
                    "legend": {
                        "orient": "bottom",
                        "direction": "horizontal",
                        "titleFont": "Georgia",
                        "titleFontSize": 16,
                        "labelFont": "Georgia",
                        "labelFontSize": 14,
                        "titleColor": "#4F4F4F",
                        "labelColor": "#4F4F4F"
                    }
                },
                "tooltip": [
                    { "field": "State", "type": "nominal", "title": "State" },
                    { "field": "Gender", "type": "nominal", "title": "Gender" },
                    { "field": "Earning", "type": "quantitative", "title": "Weekly Earning (AUD)", "format": ".2f" }
                ]
            },
            "config": {
                "background": "white",
                "view": { "stroke": "transparent" }
            }
        }

        const initialChartSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": {
                "text": "Average Weekly Earnings in Australia (1995-2024)",
                "fontSize": 18,
                "font": "Georgia",
                "fontWeight": "bold",
                "color": "#4F4F4F",
                "anchor": "middle",
                "offset": 20
            },
            "width": 450,
            "height": 380,
            "data": {
                "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/average%20weekly%20earning.csv",
                "format": { "type": "csv" }
            },
            "transform": [
                {
                    "fold": ["Male Weekly Earning", "Female Weekly Earning"],
                    "as": ["Gender", "Weekly Earning"]
                },
                {
                    "calculate": "datum['Male Weekly Earning'] - datum['Female Weekly Earning']",
                    "as": "Gap"
                }
            ],
            "layer": [
                {
                    "mark": "area",
                    "encoding": {
                        "x": {
                            "field": "Year",
                            "type": "ordinal",
                            "title": "Year",
                            "axis": {
                                "labelAngle": 0,
                                "values": ["1995", "2000", "2005", "2010", "2015", "2020", "2024"],
                                "labelFont": "Georgia",
                                "titleFont": "Georgia",
                                "titleColor": "#000000",
                                "labelColor": "#4F4F4F"
                            }
                        },
                        "y": {
                            "field": "Female Weekly Earning",
                            "type": "quantitative",
                            "title": "Weekly Earning (AUD)",
                            "axis": {
                                "labelFont": "Georgia",
                                "titleFont": "Georgia",
                                "titleColor": "#000000",
                                "labelColor": "#4F4F4F"
                            }
                        },
                        "y2": {
                            "field": "Male Weekly Earning"
                        },
                        "color": {
                            "value": "#F4A8A8"
                        },
                        "opacity": {
                            "value": 0.3
                        }
                    }
                },
                {
                    "mark": "line",
                    "encoding": {
                        "x": {
                            "field": "Year",
                            "type": "ordinal"
                        },
                        "y": {
                            "field": "Male Weekly Earning",
                            "type": "quantitative"
                        },
                        "color": {
                            "value": "#2A3B60"
                        },
                        "tooltip": [
                            { "field": "Year", "type": "ordinal", "title": "Year" },
                            {
                                "field": "Male Weekly Earning",
                                "type": "quantitative",
                                "title": "Male Weekly Earning (AUD)",
                                "format": ".2f"
                            }
                        ]
                    }
                },
                {
                    "mark": "line",
                    "encoding": {
                        "x": {
                            "field": "Year",
                            "type": "ordinal"
                        },
                        "y": {
                            "field": "Female Weekly Earning",
                            "type": "quantitative"
                        },
                        "color": {
                            "value": "#8B1A1A"
                        },
                        "tooltip": [
                            { "field": "Year", "type": "ordinal", "title": "Year" },
                            {
                                "field": "Female Weekly Earning",
                                "type": "quantitative",
                                "title": "Female Weekly Earning (AUD)",
                                "format": ".2f"
                            }
                        ]
                    }
                },
                {
                    "mark": {
                        "type": "rule",
                        "color": "red",
                        "strokeWidth": 2,
                        "strokeDash": [4, 4],
                        "opacity": 0.6
                    },
                    "encoding": {
                        "x": {
                            "datum": "2012",
                            "type": "ordinal"
                        },
                        "tooltip": [
                            {
                                "value": "Highest Pay Gap in 2012: 484.3 AUD"
                            }
                        ]
                    }
                },
                {
                    "mark": {
                        "type": "point",
                        "tooltip": true,
                        "filled": true,
                        "size": 50
                    },
                    "encoding": {
                        "x": {
                            "field": "Year",
                            "type": "ordinal"
                        },
                        "y": {
                            "field": "Male Weekly Earning",
                            "type": "quantitative"
                        },
                        "color": {
                            "value": "#2A3B60"
                        }
                    }
                },
                {
                    "mark": {
                        "type": "point",
                        "tooltip": true,
                        "filled": true,
                        "size": 50
                    },
                    "encoding": {
                        "x": {
                            "field": "Year",
                            "type": "ordinal"
                        },
                        "y": {
                            "field": "Female Weekly Earning",
                            "type": "quantitative"
                        },
                        "color": {
                            "value": "#8B1A1A"
                        }
                    }
                },
                {
                    "mark": {
                        "type": "rect",
                        "color": "#f0f0f0",
                        "stroke": "lightgrey",
                        "strokeWidth": 1
                    },
                    "encoding": {
                        "x": { "value": 30 },
                        "x2": { "value": 250 },
                        "y": { "value": 20 },
                        "y2": { "value": 60 }
                    }
                },
                {
                    "mark": {
                        "type": "text",
                        "color": "black",
                        "fontSize": 12,
                        "align": "center",
                        "dx": 0,
                        "dy": -10
                    },
                    "encoding": {
                        "x": { "value": 140 },
                        "y": { "value": 45 },
                        "text": { "value": "The highest pay gap is recorded in 2012" }
                    }
                }
            ],
            "config": {
                "background": "white",
                "axis": {
                    "labelFont": "Georgia",
                    "titleFont": "Georgia",
                    "titleColor": "#4F4F4F",
                    "labelColor": "#4F4F4F"
                }
            }
        };





        vegaEmbed('#graphs', graphsSpec);
        vegaEmbed('#bubblePlot', bubblePlotSpec);
        vegaEmbed('#weeklygap', initialChartSpec);
        // Add event listener to the Reset button
        document.getElementById('resetButton').addEventListener('click', function () {
            // Re-embed the initial chart
            vegaEmbed('#weeklygap', initialChartSpec);
        });

        // Embed the map and set up the click event for the states
        vegaEmbed('#map2', map2Spec).then(function (result) {
            result.view.addEventListener('click', function (event, item) {
                if (item && item.datum && item.datum.State) {
                    // Update the donut chart to show data for the selected state
                    weeklygapSpec.transform[0].filter = `datum.State == '${item.datum.State}'`;
                    vegaEmbed('#weeklygap', weeklygapSpec);
                }
            });
        });


    </script>


    <!-- Section 4: Sexual Assaults and Feeling Rushed Section -->
    <div class="section section4">
        <div class="inner-containerx">

            <div class="card-header">

                <h1>Female <span style="color: rgb(219, 78, 78);"> Safety</span> In Australia</h1>


            </div>

            <!-- Sexual Assaults Chart (Card) -->
            <div class="card">
                <div class="card-body">
                    <div id="assaultChart"></div> <!-- Sexual Assaults by Gender and State chart will be here -->
                </div>
            </div>

            <!-- Explanation Text for Sexual Assaults Chart (Separate Card) -->
            <div class="card">
                <div class="card-body">
                    <p class="text-content">
                        The chart above shows a huge percentage different on how many female getting sexually assaults
                        compared to male.
                        This shows how female in Australia might feel unsafe due to a high sexual assaults crime in
                        every state.
                    </p>
                </div>
            </div>

            <!-- Feeling Rushed Chart (Card) -->
            <div class="card">
                <div class="card-body">
                    <div id="feelingRushedChart"></div>
                    <!-- Feeling Rushed by Age Group and Gender chart will be here -->
                </div>
            </div>

            <!-- Explanation Text for Feeling Rushed Chart (Separate Card) -->
            <div class="card">
                <div class="card-body">
                    <p class="text-content">
                        Female feels rushed compared to male in every age range. Females aged 25-44 report feeling the
                        most rushed, with percentages decreasing as age increases.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>

        const assaultSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": {
                "text": "Sexual Assaults by Gender and State",
                "fontSize": 20,
                "font": "Georgia",
                "fontWeight": "bold",
                "color": "#4F4F4F",
                "anchor": "middle",
                "offset": 20
            },
            "width": 500,
            "height": 400,
            "data": {
                "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/Female%20Assault.csv",
                "format": { "type": "csv" }
            },
            "mark": {
                "type": "bar"
            },
            "encoding": {
                "y": {
                    "field": "State",
                    "type": "nominal",
                    "titleColor": "#000000",
                    "titleFont": "Georgia",
                    "titleFontSize": 16,
                    "sort": "ascending",
                    "axis": {
                        "labelFont": "Georgia",
                        "labelFontSize": 14,
                        "labelColor": "#4F4F4F"
                    }
                },
                "x": {
                    "field": "Estimate",
                    "type": "quantitative",
                    "stack": "normalize",
                    "title": "Percentage of Assaults (%)",
                    "axis": {
                        "format": "0%",
                        "labelAngle": 0,
                        "labelFont": "Georgia",
                        "labelFontSize": 12,
                        "titleFont": "Georgia",
                        "titleFontSize": 14,
                        "titleColor": "#000000",
                        "labelColor": "#4F4F4F"
                    }
                },
                "color": {
                    "field": "Gender",
                    "type": "nominal",
                    "title": "Gender",
                    "legend": {
                        "titleFont": "Georgia",
                        "titleFontSize": 16,
                        "labelFont": "Georgia",
                        "labelFontSize": 14,
                        "titleColor": "#000000",
                        "labelColor": "#000000"
                    },
                    "scale": {
                        "domain": ["Male", "Female"],
                        "range": ["#2A3B60", "#a84040"]
                    }
                },
                "tooltip": [
                    { "field": "State", "type": "nominal", "title": "State" },
                    { "field": "Gender", "type": "nominal", "title": "Gender" },
                    { "field": "Estimate", "type": "quantitative", "title": "Percentage of Assaults (%)", "format": ".2f" }
                ]
            }
        };


        const feelingRushedSpec = {
            "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
            "title": {
                "text": "Feeling Rushed by Age Group and Gender",
                "fontSize": 20,
                "font": "Georgia",
                "fontWeight": "bold",
                "color": "#4F4F4F",
                "anchor": "middle",
                "offset": 20
            },
            "width": 500,
            "height": 400,
            "data": {
                "url": "https://raw.githubusercontent.com/isut0003/3179/refs/heads/main/Feelingrushed.csv",
                "format": { "type": "csv" }
            },
            "transform": [
                {
                    "fold": ["Male Percentage", "Female Percentage"],
                    "as": ["Gender", "Percentage"]
                },
                {
                    "calculate": "datum.Gender == 'Male Percentage' ? -datum.Percentage : datum.Percentage",
                    "as": "Adjusted Percentage"
                }
            ],
            "mark": "bar",
            "encoding": {
                "y": {
                    "field": "Age group",
                    "type": "nominal",
                    "title": "Age Group",
                    "titleFont": "Georgia",
                    "titleFontSize": 14,
                    "axis": {
                        "labelFont": "Georgia",
                        "labelFontSize": 14,
                        "labelColor": "#4F4F4F"
                    },
                    "sort": "ascending"
                },
                "x": {
                    "field": "Adjusted Percentage",
                    "type": "quantitative",
                    "title": "Male (%), Female (%)",
                    "axis": {
                        "format": ".1f",
                        "labelExpr": "datum.value < 0 ? format(-datum.value, '.1f') : format(datum.value, '.1f')",
                        "labelFont": "Georgia",
                        "labelFontSize": 14,
                        "labelColor": "#4F4F4F",
                        "titleFont": "Georgia",
                        "titleFontSize": 12,
                        "titleColor": "#000000"
                    }
                },
                "color": {
                    "field": "Gender",
                    "type": "nominal",
                    "scale": {
                        "domain": ["Male Percentage", "Female Percentage"],
                        "range": ["#2A3B60", "#a84040"]
                    },
                    "legend": {
                        "title": "Gender",
                        "titleFont": "Georgia",
                        "titleFontSize": 16,
                        "labelFont": "Georgia",
                        "labelFontSize": 14,
                        "titleColor": "#000000",
                        "labelColor": "#000000"
                    }
                },
                "tooltip": [
                    { "field": "Age group", "type": "nominal", "title": "Age Group" },
                    { "field": "Gender", "type": "nominal", "title": "Gender" },
                    { "field": "Percentage", "type": "quantitative", "title": "Percentage (%)", "format": ".1f" }
                ]
            }
        };


        // Embed the Vega-Lite specifications for Section 4 charts
        vegaEmbed('#assaultChart', assaultSpec);
        vegaEmbed('#feelingRushedChart', feelingRushedSpec);
    </script>




    <!-- Section 5 -->
    <div class="section section5">
        <div class="inner-container">

            <div class="card-header">

                <h1>Conclusion</h1>


            </div>


            <!-- Explanation Text (Separate Card) -->
            <div class="card">
                <div class="card-body">
                    <p class="text-content">
                        Female has a huge part in Australia and seeing how their employability and labour participation
                        has increased within the year is showing their credibility.
                        Yet, there is still room to improve in decreasing the gap for female earnings and building a
                        more safe and peaceful environment for female by maintaining its
                        sexual assault crime rate and start to be more understanding to female's high task routine that
                        needs more time than male.


                    </p>
                </div>
            </div>
        </div>
    </div>




    <!-- Section 6 -->
    <div class="section section6">
        <p>
            <span>Author: Irene Sutanto</span><br>
            <span>Date: 12 October 2024</span><br>
            <span>Data: Australian Bureau Statistic (Gender indicator), World Bank Data</span>
        </p>
    </div>




</body>

</html>
